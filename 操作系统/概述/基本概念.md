
Table of Contents
=================

      * [操作系统特征](#操作系统特征)
         * [并发（Concurrence）](#并发concurrence)
            * [并发和并行的区别](#并发和并行的区别)
         * [共享（Sharing）](#共享sharing)
            * [互斥共享](#互斥共享)
            * [同时访问](#同时访问)
            * [虚拟（Virtual）](#虚拟virtual)
         * [异步（Asynchronism）](#异步asynchronism)
      * [目标和功能](#目标和功能)
         * [计算机系统资源的管理者](#计算机系统资源的管理者)
            * [处理机管理](#处理机管理)

            * [存储器管理](#存储器管理)
            * [文件管理](#文件管理)
            * [设备管理](#设备管理)
         * [用户与计算机硬件系统之间的接口](#用户与计算机硬件系统之间的接口)
            * [命令接口](#命令接口)
            * [程序接口](#程序接口)
         * [扩充机器](#扩充机器)
      * [种类](#种类)
         * [分时操作系统](#分时操作系统)
            * [同时性](#同时性)
            * [交互性](#交互性)
            * [独立性](#独立性)
            * [及时性](#及时性)
         * [实时操作系统](#实时操作系统)
            * [硬实时系统](#硬实时系统)
            * [软实时系统](#软实时系统)
         * [网络操作系统和分布式计算机系统](#网络操作系统和分布式计算机系统)
            * [网络操作系统](#网络操作系统)
            * [分布式计算机系统](#分布式计算机系统)
         * [个人计算机操作系统](#个人计算机操作系统)
      * [运行环境](#运行环境)
         * [运行机制](#运行机制)
            * [内核](#内核)
               * [时钟管理](#时钟管理)
               * [中断机制](#中断机制)
               * [原语](#原语)
               * [系统控制的数据结构及处理](#系统控制的数据结构及处理)
         * [中断和异常](#中断和异常)
            * [定义](#定义)
            * [中断流程](#中断流程)
         * [系统调用](#系统调用)
      * [体系结构](#体系结构)
         * [大内核](#大内核)
         * [微内核](#微内核)
         
## 操作系统特征
### 并发（Concurrence）
两个或多个事件在同一时间间隔内发生
#### 并发和并行的区别
并发：同一时间间隔发生（单处理机环境仅能有一道程序执行，这些程序是分时交替执行的。）
并行：同一时刻能完成两种或两种以上的工作（多流水线或多处理机硬件环境）
### 共享（Sharing）
系统内的资源可供内存中多个并发执行的进程共同使用
#### 互斥共享
在一段时间内只允许一个进程访问一个资源
进程A在访问某个资源时，必须先提出请求，如果此资源空闲，则系统将之分配给A，当其他进程也要访问该资源时，必须等待A访问完并释放该资源，该资源称为**临界资源**或**独占资源**。
#### 同时访问
这类资源允许在一段时间内由多个进程同时访问，可能是“分时共享”，如磁盘
#### 虚拟（Virtual）
虚拟：将一个物理上的实体变为若干逻辑上的对应物，如虚拟处理器、虚拟内存和虚拟外部设备等
虚拟技术：时分复用技术、空分复用技术
### 异步（Asynchronism）
进程的异步性：进程的执行并不是一步到底的，而是走走停停的，以不可预知的速度向前推进
## 目标和功能
### 计算机系统资源的管理者
#### 处理机管理
进程管理：进程控制、进程同步、进程通信、死锁处理、处理机调度
#### 存储器管理
内存分配与回收、地址映射、内存保护与共享、内存扩充
#### 文件管理
文件存储空间的管理、目录管理、文件读写管理和保护
#### 设备管理
完成用户的IO请求，包括缓冲管理、设备分配、设备处理、虚拟设备
### 用户与计算机硬件系统之间的接口
#### 命令接口
1. 联机命令接口：交互式命令接口，执行各种操作命令
2. 脱机命令接口： 批处理
#### 程序接口
系统调用，为应用程序使用内核功能所提供的接口
### 扩充机器
没有软件支持的计算机称为裸机，覆盖了软件的机器称为虚拟机或扩充机器

-----------------------------------------------

## 种类
### 分时操作系统
时间片
#### 同时性
多个用户同时使用一台计算机
#### 交互性
用户能方便的与系统进行人机对话
#### 独立性
多个用户彼此独立
#### 及时性
在很短时间内获得响应
### 实时操作系统
#### 硬实时系统
某个动作在规定时刻发生
#### 软实时系统
偶尔违反时间规定
### 网络操作系统和分布式计算机系统
#### 网络操作系统
网络中各种资源的共享及各台计算机之间的通信
#### 分布式计算机系统
分布性和并行性
二者区别：分布式操作系统中的若干计算机相互协同完成同一任务
### 个人计算机操作系统

-----------------------------------------------------------

## 运行环境
### 运行机制
#### 内核
##### 时钟管理
计时、进程切换
##### 中断机制
保护和中断现场的信息，转移控制权到相关的处理程序
##### 原语
操作系统最底层，具有原子性的操作（设备驱动、CPU切换、进程通信）
##### 系统控制的数据结构及处理
进程管理、存储器管理、设备管理
### 中断和异常
中断和异常是从用户态进入核心态的唯一途径
#### 定义
中断（外中断）：来自CPU执行指令以外的事件的发生（设备IO处理完成切换，时钟中断）
异常（内中断）：原子CPU指令内部的事件（硬件故障、软件中断、指令中断（访管中断））
#### 中断流程
硬件部分：关中断、保存断点、引出中断服务程序
中断服务程序：保存现场和屏蔽字、开中断、执行中断服务程序、关中断、恢复现场和屏蔽字、开中断、中断返回
### 系统调用
- 设备管理
- 文件管理
- 进程控制
- 进程通信
- 内存管理
用户程序执行陷入指令（也称访管指令或trap指令）发起系统调用，把CPU的使用权交给操作系统内核程序，内核处理完成，把CPU使用权还给用户态
> 用户态通过访管指令进入内核态，发生中断，内核态通过特权命令（一般是中断返回指令）转回用户态

__特权指令：具有特殊权限的指令，只能在核心态下使用，访管指令是在用户态发生的，所以不是特权指令__

---------------------------------------------------------------------

## 体系结构
### 大内核
将操作系统主要功能模块作为一个紧密联系的整体运行在核心态，性能高
### 微内核
将最基本的功能保留在内核，将不需要在核心执行的功能移到用户态